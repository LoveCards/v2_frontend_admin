on:
    # å…è®¸ä¸‹æ¸¸ä»“åº“è°ƒç”¨
    workflow_call:

jobs:
    Releases:
        runs-on: ubuntu-latest

        steps:
            # 1. æ‹‰å–å‰ç«¯æºç ï¼ˆå«å®Œæ•´å†å²ï¼‰
            - name: ğŸ¡æ‹‰å–ä»£ç 
              uses: actions/checkout@v4
              with:
                  repository: LoveCards/v2_frontend_admin # å¼ºåˆ¶æ‹‰ä¸Šæ¸¸ä»“åº“
                  fetch-depth: 0

            # 2. å®‰è£… Node å¹¶ç¼“å­˜
            - name: ğŸ”§è®¾ç½® Node ç¯å¢ƒ
              uses: actions/setup-node@v4
              with:
                  node-version: 20
                  cache: npm

            # 3. å®‰è£…ä¾èµ– & æ„å»º
            - name: ğŸ“¦å®‰è£…ä¾èµ–
              run: npm ci

            - name: ğŸ—ï¸Nuxt3 æ‰“åŒ…
              run: npm run generate

            # 4. ç»Ÿä¸€ç›®å½•åå¹¶å‹ç¼©
            - name: ğŸ—œï¸å‹ç¼©ä¸º zip
              run: |
                  mv ./dist ./admin
                  zip -r admin.zip ./admin

            # 5. ä¸Šä¼  artifactï¼ˆå›ºå®šåå­—ï¼Œä¾›ä¸‹æ¸¸ download-artifactï¼‰
            - name: ğŸ“¤ä¸Šä¼  artifact
              id: upload
              uses: actions/upload-artifact@v4
              with:
                  name: admin # ä¸‹æ¸¸ç”¨è¿™ä¸ªåå­—ä¸‹è½½
                  path: admin.zip
                  retention-days: 1 # ä¸‹æ¸¸ç«‹åˆ»æ‹¿ï¼Œ1 å¤©è¶³å¤Ÿ
